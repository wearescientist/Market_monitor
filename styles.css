/* Zpix Pixel Font - 像素风格字体 */
@font-face {
  font-family: 'Zpix';
  src: url('https://cdn.jsdelivr.net/gh/SolidZORO/zpix-pixel-font@master/dist/zpix.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

:root {
  /* Terminal / Hacker Theme Variables */
  --bg-color: #0d1117;
  --panel-bg: #161b22;
  --text-main: #c9d1d9;
  --text-dim: #8b949e;
  --terminal-green: #00ff41;
  --terminal-green-dim: rgba(0, 255, 65, 0.2);
  --terminal-red: #ff0055;
  --terminal-red-dim: rgba(255, 0, 85, 0.2);
  --terminal-blue: #58a6ff;
  --terminal-yellow: #f59e0b;
  --border-color: #30363d;
  /* Zpix 像素字体作为主字体，支持中英文 */
  --font-pixel: 'Zpix', 'SF Mono', Menlo, Courier, monospace;
  --font-mono: 'Zpix', 'SF Mono', 'Segoe UI Mono', 'Roboto Mono', Menlo, Courier, monospace;
  --font-chinese: 'Zpix', 'PingFang SC', 'Heiti SC', 'Microsoft YaHei', 'SimHei', 'STHeiti', sans-serif;
}

body {
  width: 350px;
  font-family: var(--font-mono);
  margin: 0;
  padding: 0;
  background-color: var(--bg-color);
  color: var(--text-main);
  font-size: 13px;
  line-height: 1.5;
}

/* Apply terminal font to ALL elements (except stock names which need Chinese font) */
*,
*::before,
*::after {
  font-family: var(--font-mono);
}

/* Override for stock names - needs Chinese font support */
.token-symbol {
  font-family: var(--font-chinese), var(--font-mono) !important;
}

.container {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* --- Header / Terminal Top Bar --- */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 12px;
  border-bottom: 1px dashed var(--border-color);
  margin-bottom: 4px;
}

h1 {
  font-size: 1rem;
  font-weight: 700;
  margin: 0;
  color: var(--terminal-green);
  text-shadow: 0 0 5px var(--terminal-green-dim);
  letter-spacing: -0.5px;
}

h1::before {
  content: "~/market-monitor";
}

/* Hide original text visually but keep for a11y if needed, or just replace via CSS if content allows. 
   Actually, the HTML has "Crypto Monitor". We can "hack" it or just style it. 
   Let's just style the text itself for now, keeping it simpler. 
   I will use the ::before to add the path look and hide the original text if I want, 
   but let's just make "Crypto Monitor" look cool.
*/
h1 {
  /* Resetting the content hack to be safer and just style the text */
  content: normal;
}

h1::before {
  content: none;
}

/* Reset */

/* Let's actually change the H1 to look like a prompt path in the HTML or just style it here */
h1 {
  font-family: var(--font-mono);
}

h1::after {
  content: "_";
  animation: blink 1s step-end infinite;
  margin-left: 5px;
  color: var(--terminal-green);
}

@keyframes blink {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0;
  }
}

.header-controls {
  display: flex;
  gap: 10px;
}

button {
  cursor: pointer;
  border: 1px solid var(--border-color);
  background: var(--panel-bg);
  color: var(--text-main);
  font-family: var(--font-mono);
  font-size: 0.8rem;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

button:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  box-shadow: 0 0 8px var(--terminal-green-dim);
}

#settings-btn,
#refresh-btn {
  /* Simplify icons to text if possible, or keep icons but style them */
  width: 28px;
  height: 28px;
  font-size: 14px;
}

/* --- Settings Panel --- */
.hidden {
  display: none;
}

#settings-panel {
  background: var(--panel-bg);
  border: 1px solid var(--border-color);
  padding: 12px;
  border-radius: 4px;
  margin-bottom: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

.form-group {
  margin-bottom: 12px;
}

label {
  display: block;
  font-size: 0.75rem;
  color: var(--text-dim);
  margin-bottom: 4px;
  text-transform: uppercase;
}

input[type="text"],
input[type="number"],
input[type="password"],
select {
  width: 100%;
  padding: 8px;
  background-color: var(--bg-color);
  border: 1px solid var(--border-color);
  color: var(--terminal-green);
  font-family: var(--font-mono);
  font-size: 0.85rem;
  border-radius: 2px;
  box-sizing: border-box;
}

input:focus,
select:focus {
  outline: none;
  border-color: var(--terminal-green);
  box-shadow: 0 0 5px var(--terminal-green-dim);
}

/* --- Add Token Section (Prompt) --- */
.add-token-section {
  display: grid;
  grid-template-columns: 100px 1fr 60px;
  /* API selector | Symbol input | Add button */
  gap: 8px;
  align-items: center;
  padding: 10px;
  background: var(--panel-bg);
  border: 1px solid var(--border-color);
  border-radius: 4px;
}

/* Uniform height for all form elements */
.add-token-section select,
.add-token-section input,
.add-token-section button {
  height: 32px;
  box-sizing: border-box;
}

#api-selector {
  padding: 4px 8px;
  font-size: 0.75rem;
  height: 32px;
}

#token-symbol {
  text-transform: uppercase;
  font-weight: bold;
}

#add-token {
  background: transparent;
  border: 1px solid var(--terminal-green);
  color: var(--terminal-green);
  font-weight: bold;
}

#add-token:hover {
  background: var(--terminal-green);
  color: black;
}

/* --- Token List --- */
#token-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.token-item {
  display: grid;
  grid-template-columns: 130px 1fr 24px;
  /* Symbol (wider for A-share names like 贵州茅台[600519]) | Price/Info | Del */
  align-items: center;
  padding: 8px 12px;
  background: var(--panel-bg);
  border: 1px solid var(--border-color);
  /* Green left border */
  border-left: 3px solid var(--terminal-blue);
  border-radius: 2px;
  position: relative;
  min-height: 50px;
}

.token-item:hover {
  border-color: var(--text-dim);
  border-left-color: var(--terminal-green);
}

/* Chart Canvas - keep strictly behind */
.token-chart {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  opacity: 0.1;
  /* Lower opacity for subtle effect */
  pointer-events: none;
  mix-blend-mode: screen;
  /* specific for dark mode */
}

.token-info {
  display: flex;
  flex-direction: column;
  justify-content: center;
  z-index: 1;
}

.token-symbol {
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--terminal-blue);
  letter-spacing: 0.3px;
  /* Use Chinese font for A-share stock names */
  font-family: var(--font-chinese), var(--font-mono);
  /* Keep stock name and code on same line, always show full text */
  white-space: nowrap;
  overflow: visible;
}

/* Dynamic font sizes handling from JS */
.token-symbol[data-length="medium"] {
  font-size: 0.9rem;
}

.token-symbol[data-length="long"] {
  font-size: 0.75rem;
}

.token-symbol[data-length="very-long"] {
  font-size: 0.65rem;
}

.token-symbol[data-length="extreme"] {
  font-size: 0.55rem;
}

.token-alert {
  font-size: 0.7rem;
  color: var(--terminal-yellow);
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}

.alert-row {
  /* Make the entire row clickable */
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
  width: 100%;
}

.alert-input,
.alert-display {
  background: transparent;
  border: 1px dashed var(--border-color);
  color: var(--terminal-yellow);
  font-family: var(--font-mono);
  text-align: center;
  width: 55px;
  height: 18px;
  padding: 1px 4px;
  font-size: 0.6rem;
  box-sizing: border-box;
  line-height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: border-color 0.2s, box-shadow 0.2s;
  /* Ensure consistent sizing */
  min-width: 55px;
  max-width: 55px;
  min-height: 18px;
  max-height: 18px;
  vertical-align: middle;
}

/* Empty state placeholder styling */
.alert-input::placeholder {
  color: var(--text-dim);
  opacity: 0.5;
  font-size: 0.55rem;
}

/* Hide number input spinners (up/down arrows) */
.alert-input::-webkit-outer-spin-button,
.alert-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.alert-input[type="number"] {
  -moz-appearance: textfield;
}

/* Hover state for both input and display */
.alert-input:hover,
.alert-display:hover {
  border-color: var(--terminal-yellow);
  box-shadow: 0 0 4px var(--terminal-green-dim);
}

/* Focus state with yellow glow */
.alert-input:focus {
  border-color: var(--terminal-yellow);
  box-shadow: 0 0 6px rgba(245, 158, 11, 0.3);
  outline: none;
}

/* Ensure display shows same styling when value exists */
.alert-display:not(:empty) {
  border-color: var(--border-color);
}

/* Price Section */
.token-price {
  z-index: 1;
  text-align: right;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  background: transparent;
  /* Removed white bg */
  color: var(--text-main);
}

.price-value {
  font-size: 1rem;
  font-weight: 600;
}

.change-percent {
  font-size: 0.8rem;
  font-weight: 400;
}

.text-green {
  color: var(--terminal-green);
}

.text-red {
  color: var(--terminal-red);
}

/* Animations - Neon Flash */
@keyframes flashGreenNeon {
  0% {
    color: #fff;
    text-shadow: 0 0 10px var(--terminal-green);
  }

  50% {
    color: var(--terminal-green);
    text-shadow: none;
  }

  100% {
    color: var(--terminal-green);
  }
}

@keyframes flashRedNeon {
  0% {
    color: #fff;
    text-shadow: 0 0 10px var(--terminal-red);
  }

  50% {
    color: var(--terminal-red);
    text-shadow: none;
  }

  100% {
    color: var(--text-red);
  }

  /* Falls back to class color */
}

/* Override JS standard classes with new animations */
.price-up {
  animation: flashGreenNeon 1.5s ease-out;
  color: var(--terminal-green);
}

.price-down {
  animation: flashRedNeon 1.5s ease-out;
  color: var(--terminal-red);
}

.delete-btn {
  z-index: 2;
  background: transparent;
  border: none;
  color: var(--border-color);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  margin-left: auto;
  cursor: pointer;
}

.delete-btn svg {
  width: 14px;
  height: 14px;
}

.delete-btn:hover {
  color: var(--terminal-red);
}

.delete-btn:hover svg {
  filter: drop-shadow(0 0 3px var(--terminal-red-dim));
}

/* API Provider List styling */
.api-provider-item {
  background: var(--bg-color);
  border: 1px solid var(--border-color);
  color: var(--text-dim);
  padding: 8px;
  border-radius: 2px;
  margin-bottom: 4px;
}

.api-provider-item.selected {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: var(--panel-bg);
}

.api-provider-item.configured .provider-status {
  color: var(--terminal-green);
}

.provider-status {
  font-weight: bold;
}

/* Misc buttons */
.secondary-btn {
  background: var(--border-color);
  color: var(--text-main);
}

.secondary-btn:hover {
  background: var(--text-dim);
  color: var(--bg-color);
}